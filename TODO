TODO
====

- Fast forward actions that aren't visible.
- Refactor gamemode out:
  - Rendering separate
  - Core state machine
    - Start screen
    - Game
    - Game Over
  - Controls
    - Allow for WASDQEZC, vi and numpad.
    - Debug keymode.
    - Mouse, both desktop (absolute pointer) and laptop versions (relative motion swipes).
- Actor refactor
  - Visuals refactored into Sprites
  - May need more than one actor per vertex, e.g. ghosts. May be able to special case those though.
  - Blackboard for AI related state.
- Move Level graph function into a Graph2d utility library, they'd be useful for room and level gen.
- Stop reaching into Level's innards all over the place, especially for vertex and graph info.
- Need an object (maybe Level) that hold the actors, level, scheduler and so on.
  - Needs to be able to spawn actors with.
  - Need to be able to change time (for slow mo' on death).
  - Need to be able to interrogate the graph.
- Explanatory text for monsters.
  - Maybe with unique names and flavour lines.

- The scheduler is a nice idea but the code is too complex.
  - Binary heap isn't stable by default but could be a good idea.
    - Problem is that you need a for ever increasing timer.

- Voronoi
  - Polygon offset algorithm for shorelines, roofs and so on.
  - Edge fettling for cells, e.g. grass.
  - Reconsider level generation in light of using voronoi.
    - Create room AABBs layout gen style.
    - Change roomgen to create points and not graphs.
    - Voronoi
    - Connect rooms
    
  - Either try and maintain max vertex valance of 8 (so keys work) or move to mouse only input.
  - Maybe try to compile Love by hand to get Geometry support.
  - Need to be able to traverse the halfedges and find out connected cells.

  - Lakes (water, lava, abyss, acid, ...)
    - Brogue method would be hard to translate:
      - Create CA based lake.
      - Try five times and place into world.
        - If connectivity breaks reject.
    - We only have connectivity after the voronoi step.
      - Could use lake as a mask and turn already created voronoi cells into
        fluid then check connectivity though.
        - Will look weird to have square and hexagonal water spaces though.